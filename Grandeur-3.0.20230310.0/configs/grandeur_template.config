//# Docker Params -------------------------------------------
//docker.enabled                  = true
//docker.runOptions               = '-u \$(id -u):\$(id -g)'
//docker.sudo                     = false
//docker.temp                     = /tmp
//docker.remove                   = true
//docker.registry                 = ''
//docker.fixOwnership             = true
//docker.engineOptions            = ''
//docker.mountFlags               = ''

//# Singularity Params --------------------------------------
//singularity.enabled             = true
//singularity.autoMounts          = true
//singularity.runOptions          = ""
//process.stageInMode             = "link"
//singularity.engineOptions       = ''
//singularity.cacheDir            = ''

//# AWS Batch Params ----------------------------------------
//process.executor                = 'awsbatch'
//process.queue                   = ''
//aws.batch.cliPath               = '/home/ec2-user/miniconda/bin/aws'
//aws.region                      = 'us-east-1'
//workDir                         = 's3://'

//# Google Cloud Params -------------------------------------
//process.executor                = ''
//google.project                  = ''
//google.location                 = ''
//google.region                   = ''
//workDir                         = ''
//google.lifeSciences.bootDiskSize = 50.GB

//# Nextflow Tower ------------------------------------------
//tower.accessToken               = ''
//tower.enabled                   = true

//# Adjustable Workflow parameters ---------------------------
//params.reads                    = 'reads'
//params.gff                      = 'gff'
//params.fastas                   = 'fastas'
//params.outdir                   = 'grandeur'

//# Basic CPU usage grouping
//params.maxcpus                  = 12
//params.medcpus                  = 4

//# minimum number of reads in fastq files
//params.minimum_reads              = 10000

//# directories for linking workflows
//params.phoenix_wf                 = false
//params.donut_falls_wf             = false

//# external reference files and databases
//# WARNING : workflow.projectDir is not evaulated in a config file
//params.kraken2_db                 = ""
//params.blast_db                   = ""
//params.blast_db_type              = "nt"
//params.mash_db                    = ""
//params.fastani_ref                = workflow.projectDir + "/configs/fastani_ref.tar.gz"
//params.genome_sizes               = workflow.projectDir + "/configs/genome_sizes.json"
//params.genome_references          = workflow.projectDir + "/configs/genomes.txt"         

//# SRA accessions mainly for testing
//params.sra_accessions             = []

//# Choosing dynamic references vs static references for fastani
//params.current_datasets           = true

//# Allowing phylogenetic anslysis
//params.msa                        = false

//# commandline options for the various processes with their default values
//params.amrfinderplus_options      = ""
//params.bbduk_options              = "k=31 hdist=1"
//params.bbmap_options              = ""
//params.blastn_options             = "-max_target_seqs 10 -max_hsps 1 -evalue 1e-25"
//params.blobtools_create_options   = ""
//params.blobtools_view_options     = ""
//params.blobtools_plot_options     = "--format png -r species"
//params.blobtools_bbmap_options    = ""
//params.datasets_max_genomes       = 5
//params.fastani_options            = "--matrix"
//params.fasterqdump_options        = ""
//params.fastp_options              = "--detect_adapter_for_pe"
//params.fastqc_options             = ""
//params.fastqscan_options          = ""
//params.iqtree2_options            = "-t RANDOM -m GTR+F+I -bb 1000 -alrt 1000"
//params.iqtree2_outgroup           = ""
//params.kleborate_options          = "-all"
//params.kraken2_options            = ""
//params.mash_sketch_options        = "-m 2"
//params.mash_dist_options          = "-v 0 -d 0.5"
//params.mash_max_hits              = 100
//params.mlst_options               = ""
//params.multiqc_options            = ""
//params.plasmidfinder_options      = ""
//params.prokka_options             = "--mincontiglen 500 --compliant --locustag locus_tag --centre STAPHB"
//params.quast_options              = ""
//params.roary_options              = ""
//params.roary_min_genes            = 1500
//params.seqsero2_options           = "-m a -b mem"
//params.serotypefinder_options     = ""
//params.shigatyper_options         = ""
//params.snp_dists_options          = "-c"
//params.spades_options             = "--isolate"

//# Docker or Singularity Images -------------------------------------------
amrfinderplus_container           = 'staphb/ncbi-amrfinderplus:3.10.36'
bbtools_container                 = 'staphb/bbtools:38.98'
blastn_container                  = 'staphb/blast:2.13.0'
blobtools_container               = 'chrishah/blobtools:v1.1.1'
datasets_container                = 'staphb/ncbi-datasets:14.3.0'
fastani_container                 = 'staphb/fastani:1.33'
fastp_container                   = 'staphb/fastp:0.23.2'
fastqc_container                  = 'staphb/fastqc:0.11.9'
fastqscan_container               = 'staphb/fastq-scan:1.0.1'
iqtree_container                  = 'staphb/iqtree2:2.1.2'
kleborate_container               = 'staphb/kleborate:2.1.0'
kraken2_container                 = 'staphb/kraken2:2.1.2-no-db'
mash_container                    = 'staphb/mash:2.3'
mlst_container                    = 'staphb/mlst:2.22.1'
multiqc_container                 = 'quay.io/biocontainers/multiqc:1.12--pyhdfd78af_0'
plasmidfinder_container           = 'staphb/plasmidfinder:2.1.6'
prokka_container                  = 'staphb/prokka:1.14.5'
quast_container                   = 'staphb/quast:5.0.2'
roary_container                   = 'staphb/roary:3.13.0'
seqsero2_container                = 'staphb/seqsero2:1.2.1'
serotypefinder_container          = 'staphb/serotypefinder:2.0.1'
shigatyper_container              = 'staphb/shigatyper:2.0.1'
spades_container                  = 'staphb/spades:3.15.5'
snpdists_container                = 'staphb/snp-dists:0.8.2'
sratools_container                = 'quay.io/biocontainers/sra-tools:2.11.0--pl5321ha49a11a_3'
summary_container                 = 'quay.io/biocontainers/pandas:1.1.5'

process {
  //# final directory
  // publishDir = [ path: params.outdir, mode: 'copy' ]

  //# cpu management
  withLabel: maxcpus {
    cpus = params.maxcpus
  }
  withLabel: medcpus {
    cpus = params.medcpus
  }

  //# processes
  withName: 'amrfinderplus' {
    container = amrfinderplus_container
  }
  withName: 'bb.*' {
    container = bbtools_container
  }
  withName: 'blastn' {
    container = blastn_container
  }
  withName: 'blobtools_.*' {
    container = blobtools_container
  }
  withName: 'datasets.*' {
    container = datasets_container
  }
  withName: 'decompression' {
    container = summary_container
  }
  withName: 'download_sra' {
    container = sratools_container
  }
  withName: 'fastani' {
    container = fastani_container
  }
  withName: 'fastp' {
    container = fastp_container
  }
  withName: 'fastqc' {
    container = fastqc_container
  }
  withName: 'fastqscan' {
    container = fastqscan_container
  }
  withName: 'flag' {
    container = summary_container
  }
  withName: 'iqtree2' {
    container = iqtree_container
  }
  withName: 'kleborate' {
    container = kleborate_container
  }
  withName: 'kraken2_.*' {
    container = kraken2_container
  }
  withName: 'mash' {
    container = mash_container
  }
  withName: 'mlst' {
    container = mlst_container
  }
  withName: 'multiqc' {
    container = multiqc_container
  }
  withName: 'names' {
    container = summary_container
  }
  withName: 'plasmidfinder' {
    container = plasmidfinder_container
  }
  withName: 'prokka' {
    container = prokka_container
  }
  withName: 'quast' {
    container = quast_container
  }
  withName: 'representative' {
    container = summary_container
  }
  withName: 'roary' {
    container = roary_container
  }
  withName: 'seqsero2' {
    container = seqsero2_container
  }
  withName: 'serotypefinder' {
    container = serotypefinder_container
  }
  withName: 'shigatyper' {
    container = shigatyper_container
  }
  withName: 'size' {
    container = summary_container
  }
  withName: 'snp_dists' {
    container = snpdists_container
  }
  withName: 'spades' {
    container = spades_container
  }
  withName: 'species' {
    container = summary_container
  }
  withName: 'summary' {
    container = summary_container
  }
}
